import requests
import argparse
from os import path

parser = argparse.ArgumentParser(description="")
parser.add_argument('-f','--file', help="Indica el archivo a subir")
parser = parser.parse_args()

def main():
    file = parser.file
    if file:
        if path.exists(file):
            archivo = open(file, 'rb')
            sitio = 'https://curso--python-0-prueba-pentest1.000webhostapp.com/index.php'
            # sitio = 'https://avepdf.com/es/text-to-pdf'
            paquete = {
                'uploaded_file': archivo # La key sale del código fuente de la pagina de destino. Es el nombre de la variable del input form que recibe el parámetro
            }
            headers = {
                'UserAgent': 'Firefox'
            }
            peticion = requests.post(url=sitio, 
                                     files=paquete,
                                     headers=headers)
            print(peticion.status_code)
            print(peticion.url)
            print(peticion.headers)
            if file in peticion.text:
                print(peticion.text)
                print("Archivo subido con éxito")
            else:
                print(peticion.text)
                print("Falló la súbida del archivo...")
            archivo.close()
        else:
            print("No existe el archivo...")
    else:
        print("Necesito un archivo para subir...")

if __name__ == '__main__':
    try:
        main()
    except KeyboardInterrupt:
        print("Saliendo...")