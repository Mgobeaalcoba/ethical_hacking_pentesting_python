import requests
from os import path
from progress.bar import Bar

def main():
    """
    Ataque de fuerza bruta a un sitio wordpress para entender cuales son los plugins que utiliza.
    """
    if path.exists('intro_hacking/wp_plugins.txt'):
        file = open('intro_hacking/wp_plugins.txt', 'r')
        file = file.read().split('\n')
        lista = []
        objetivo = "https://www.rollingstone.com/"
        bar = Bar("Espere...", mex=len(file))

        for plugin in file:
            bar.next()
            try:
                peticion = requests.get(url=objetivo+"/"+plugin)
                if peticion.status_code == 200:
                    print(peticion.status_code)
                    print("Sumando a la lista...")
                    lista.append(plugin)
                else:
                    print(peticion.status_code)
                    print("No debe ir en la lista...")
            except:
                print("No se encontr√≥ el plugin")

        for plugin in lista:
            print(f"Plugin encontrado: {plugin}")
    
    else:
        print("El archivo no existe...")


if __name__ == '__main__':
    try:
        main()
    except KeyboardInterrupt:
        print("Saliendo...")
        exit()
